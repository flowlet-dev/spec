# Phase 1 MVP定義書 v1.1

## 1. Phase 1で答える問い

**前回の給料日から今回の給料日までで、収支は黒字か赤字か？**

### 根拠
- 家計管理における最上位の判断軸は「増えたか／減ったか」
- 目的別・予算管理は黒字赤字が分からなければ意味を持たない
- 給料日基準は実生活の意思決定に直結する

---

## 2. MVPの価値定義（Value Proposition）

給料日を起点に家計を管理したい人が、  
各口座・各クレジットカードの明細を入力するだけで、  
**その期間の収支が黒字か赤字かを即座に把握できる**

### 根拠
- 入力行為とアウトプットが1対1で対応している
- 差額（±）という単一指標は解釈コストが低い

---

## 3. 管理対象スコープ

### スコープ：A. 現金フローのみ

#### 扱うもの
- 収入
- 支出
- 振替
- 収支差額（黒字／赤字）

#### 扱わないもの
- 資産残高
- 評価額
- 目的別残高
- 予算

### 根拠
- 黒字／赤字判定にはフローのみで十分
- ストックを含めると整合性コストが急増する

---

## 4. 会計期間の定義

### 会計期間
- **前回の給料日 〜 今回の給料日**

#### 仕様
- 開始日・終了日はユーザーが手動設定
- 月跨ぎを前提とする
- Phase 1では1期間のみ管理

### 根拠
- 給与サイクルは人によって異なる
- 自動計算はPhase 2以降で対応可能

---

## 5. 最小ユーザーストーリー

給料日区間を設定し、
各口座・クレジットカードの明細を入力すると、
その期間の収支が黒字か赤字か分かる

### 根拠
- 1文で完結しており、派生行動が発生しない

---

## 6. 明細仕様

### 6.1 明細タイプ

- 収入
- 支出
- 振替

---

### 6.2 振替の定義

**自分の管理対象内でのお金の移動**

#### 例
- 銀行A → 銀行B
- 銀行 → クレジットカード引き落とし
- 現金 → 口座入金

#### 集計ルール
- 収入合計：影響なし
- 支出合計：影響なし
- 収支差額：±0

### 根拠
- 振替は損益に影響しない
- 収入＋支出で表現すると集計が破綻しやすい

---

### 6.3 明細項目（Phase 1）

#### 共通
- 日付
- 金額
- メモ（任意）

#### 収入・支出
- 紐づくアカウント
- 収支サマリー反映フラグ（include_in_summary）

#### 振替
- 出金元アカウント
- 入金先アカウント
- include_in_summary：**false 固定**

---

## 7. 収支サマリー集計仕様

### 集計対象
- `include_in_summary = true` の明細のみ

### 表示項目
- 総収入
- 総支出
- 差額（収入 − 支出）
- 判定：黒字 / 赤字

### デフォルト設定

| 明細タイプ | include_in_summary |
|----------|-------------------|
| 収入 | true |
| 支出 | true |
| 振替 | false（変更不可） |

---

## 8. アカウント管理（最小）

### 種別
- 銀行口座
- クレジットカード

### 属性
- 名前のみ
- 残高は持たない

### 根拠
- 残高はPhase 1の問いに不要
- 振替の識別子としてのみ使用

---

## 9. Phase 1に含めない機能

- 目的別管理
- 予算管理
- 自動明細取得
- グラフ・分析
- 複数期間管理
- ユーザー認証

### 根拠
- 問い「黒字か赤字か」に直接寄与しない
- 個人開発初期で破綻しやすい領域

---

## 10. Phase 1 完成条件（Done Criteria）

以下をすべて満たしたら Phase 1 完了とする。

- 給料日区間を1つ設定できる
- 各口座・カードの明細を入力できる
- 振替を正しく登録できる
- 収入・支出・差額が表示される
- **黒字か赤字かを迷わず判断できる**
- 実データで1サイクル運用できる

---

## 11. Phase 1の位置づけ

Phase 1は  
**「正確な家計管理」ではなく  
「判断できる家計管理」を作るフェーズ**である。
