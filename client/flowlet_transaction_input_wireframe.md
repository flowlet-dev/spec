# FLOWLET 取引入力画面 ワイヤーフレーム

## 1. PC版レイアウト

```
┌─────────────────────────────────────────────────────────────────────┐
│ FLOWLET                                    [ユーザー名] [設定] [⚙]  │
├──────────┬──────────────────────────────────────────────────────────┤
│          │                                                          │
│ ナビゲー  │  ┌─────────────────────────────────────────────────┐   │
│ ション   │  │ 取引入力                              [× 閉じる]  │   │
│          │  └─────────────────────────────────────────────────┘   │
│ 🏠 ホーム │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 💰 取引   │  │ 取引タイプ                                    │      │
│  - 入力  │  │ ┌────────┬────────┬────────────────┐         │      │
│  - 履歴  │  │ │ 収入   │ 支出   │ 口座間移動     │         │      │
│          │  │ │  ○    │  ●    │      ○        │         │      │
│ 📊 予算   │  │ └────────┴────────┴────────────────┘         │      │
│          │  └──────────────────────────────────────────────┘      │
│ 🎯 貯金   │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 🏦 口座   │  │ 日付                                          │      │
│ カード   │  │ [2024-01-25      ] 📅                        │      │
│          │  └──────────────────────────────────────────────┘      │
│ 📁 カテゴリ│                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 🔄 繰返支出│  │ 金額                                          │      │
│          │  │ ¥ [____________]                              │      │
│ 📈 レポート│  └──────────────────────────────────────────────┘      │
│          │                                                          │
│ ⚙ 設定    │  ┌──────────────────────────────────────────────┐      │
│          │  │ カテゴリ                                      │      │
│          │  │ [食費 ▼]  →  [食料品 ▼]                     │      │
│          │  │  大カテゴリ    小カテゴリ                     │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │ 支払方法                                      │      │
│          │  │ ○ 口座  [みずほ銀行メイン口座 ▼]            │      │
│          │  │ ● カード [楽天カード ▼]                      │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │ メモ                                          │      │
│          │  │ [________________________________]            │      │
│          │  │                                              │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │                                              │      │
│          │  │        [キャンセル]    [登録する]            │      │
│          │  │                                              │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
└──────────┴──────────────────────────────────────────────────────────┘
```

---

## 2. 口座間移動モード(PC版)

```
┌─────────────────────────────────────────────────────────────────────┐
│ FLOWLET                                    [ユーザー名] [設定] [⚙]  │
├──────────┬──────────────────────────────────────────────────────────┤
│          │                                                          │
│ ナビゲー  │  ┌─────────────────────────────────────────────────┐   │
│ ション   │  │ 取引入力 - 口座間移動                 [× 閉じる]  │   │
│          │  └─────────────────────────────────────────────────┘   │
│ 🏠 ホーム │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 💰 取引   │  │ 取引タイプ                                    │      │
│  - 入力  │  │ ┌────────┬────────┬────────────────┐         │      │
│  - 履歴  │  │ │ 収入   │ 支出   │ 口座間移動     │         │      │
│          │  │ │  ○    │  ○    │      ●        │         │      │
│ 📊 予算   │  │ └────────┴────────┴────────────────┘         │      │
│          │  └──────────────────────────────────────────────┘      │
│ 🎯 貯金   │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 🏦 口座   │  │ 日付                                          │      │
│ カード   │  │ [2024-01-25      ] 📅                        │      │
│          │  └──────────────────────────────────────────────┘      │
│ 📁 カテゴリ│                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│ 🔄 繰返支出│  │ 金額                                          │      │
│          │  │ ¥ [____________]                              │      │
│ 📈 レポート│  └──────────────────────────────────────────────┘      │
│          │                                                          │
│ ⚙ 設定    │  ┌──────────────────────────────────────────────┐      │
│          │  │ 移動元口座                                    │      │
│          │  │ [みずほ銀行メイン口座 ▼]                     │      │
│          │  │ 残高: ¥250,000                               │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │ 移動先口座                                    │      │
│          │  │ [貯金用口座 ▼]                               │      │
│          │  │ 残高: ¥1,500,000                             │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │ 貯金目標への割り当て (貯金用口座の場合)       │      │
│          │  │                                              │      │
│          │  │ [旅行貯金 ▼] ¥ [50,000]  [+ 追加]           │      │
│          │  │ [車購入 ▼]   ¥ [50,000]  [削除]             │      │
│          │  │                                              │      │
│          │  │ 合計: ¥100,000 / 移動額: ¥100,000  ✓        │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │ メモ                                          │      │
│          │  │ [________________________________]            │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────┐      │
│          │  │        [キャンセル]    [登録する]            │      │
│          │  └──────────────────────────────────────────────┘      │
│          │                                                          │
└──────────┴──────────────────────────────────────────────────────────┘
```

---

## 3. スマホ版レイアウト(支出)

```
┌─────────────────────────┐
│ ← 取引入力              │
├─────────────────────────┤
│                         │
│ 取引タイプ              │
│ ┌─────┬─────┬────────┐ │
│ │収入 │支出 │口座移動│ │
│ │ ○  │ ●  │   ○   │ │
│ └─────┴─────┴────────┘ │
│                         │
│ 日付                    │
│ ┌─────────────────────┐ │
│ │ 2024-01-25      📅  │ │
│ └─────────────────────┘ │
│                         │
│ 金額                    │
│ ┌─────────────────────┐ │
│ │ ¥ _____________     │ │
│ └─────────────────────┘ │
│                         │
│ カテゴリ                │
│ ┌─────────────────────┐ │
│ │ 食費 ▼              │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │ 食料品 ▼            │ │
│ └─────────────────────┘ │
│                         │
│ 支払方法                │
│ ○ 口座                  │
│ ┌─────────────────────┐ │
│ │ みずほ銀行 ▼        │ │
│ └─────────────────────┘ │
│                         │
│ ● カード                │
│ ┌─────────────────────┐ │
│ │ 楽天カード ▼        │ │
│ └─────────────────────┘ │
│                         │
│ メモ                    │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │                     │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │    [キャンセル]     │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │    [登録する]       │ │
│ └─────────────────────┘ │
│                         │
└─────────────────────────┘
```

---

## 4. UI仕様

### 取引タイプ切り替え
- タブ形式またはラジオボタン
- 選択すると下部のフォームが動的に変化
  - **収入**: カテゴリ、口座、メモ
  - **支出**: カテゴリ、支払方法(口座/カード)、メモ
  - **口座間移動**: 移動元・移動先、貯金目標割り当て、メモ

### カテゴリ選択
- 大カテゴリ選択 → 小カテゴリのドロップダウンが表示
- 小カテゴリがない場合は1つのみ表示

### 支払方法(支出の場合)
- ラジオボタンで口座/カード選択
- 選択に応じてドロップダウンが切り替わる

### 貯金目標への割り当て(口座間移動で貯金用口座選択時)
- 複数の目標に分割可能
- [+ 追加]ボタンで行を追加
- 合計が移動額と一致するかバリデーション
- 一致すればチェックマーク表示

### バリデーション
- **日付**: 必須
- **金額**: 必須、0より大きい数値
- **カテゴリ**: 必須(口座間移動以外)
- **支払方法**: 必須(収入・支出)
- **口座**: 必須(口座間移動)
- **貯金目標割り当て**: 合計が移動額と一致(貯金用口座の場合)

### エラー表示
- 入力欄の下に赤文字でエラーメッセージ
- 未入力の必須項目は送信時に赤枠でハイライト

---

## 5. 機能詳細

### 日付入力
- デフォルト: 今日の日付
- カレンダーピッカーで選択可能
- 手入力も可能(YYYY-MM-DD形式)

### 金額入力
- 数値のみ入力可能
- 3桁カンマ区切りを自動挿入
- ¥記号は自動表示

### カテゴリ選択
- API: `GET /api/categories?type=EXPENSE`
- 大カテゴリ選択時、小カテゴリをフィルタリング

### 口座・カード選択
- API: `GET /api/accounts`, `GET /api/credit-cards`
- 残高も表示(口座の場合)

### 貯金目標選択
- API: `GET /api/savings-goals?accountId={accountId}`
- 移動先口座に紐付く貯金目標のみ表示

### 登録処理
- API: `POST /api/transactions`
- 成功時: ダッシュボードに戻る + 成功メッセージ表示
- 失敗時: エラーメッセージ表示、フォームは保持

### キャンセル
- 確認ダイアログ表示(入力内容がある場合)
- ダッシュボードに戻る

---

## 6. インタラクション

### PC版
- Enterキーで次の入力欄にフォーカス
- Tabキーでフォーカス移動
- Ctrl+Enter で登録

### スマホ版
- テンキー表示(金額入力時)
- 次へボタンで次の入力欄に移動
- スクロールして全フォーム表示

### 共通
- リアルタイムバリデーション
- 自動保存(下書き機能)※オプション

---

このワイヤーフレームで問題ないですか?

次は**取引履歴画面**を作成しますか?