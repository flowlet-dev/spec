# FLOWLET 繰り返し支出設定画面 ワイヤーフレーム

## 1. PC版レイアウト

```
┌─────────────────────────────────────────────────────────────────────┐
│ FLOWLET                                    [ユーザー名] [設定] [⚙]  │
├──────────┬──────────────────────────────────────────────────────────┤
│          │                                                          │
│ ナビゲー  │  ┌─────────────────────────────────────────────────┐   │
│ ション   │  │ 繰り返し支出設定                                 │   │
│          │  └─────────────────────────────────────────────────┘   │
│ 🏠 ホーム │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 💰 取引   │  │ 繰り返し支出一覧              [+ 支出を追加]      │  │
│  - 入力  │  └──────────────────────────────────────────────────┘  │
│  - 履歴  │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 📊 予算   │  │ 家賃                          [編集] [削除]      │  │
│          │  │                                                  │  │
│ 🎯 貯金   │  │ 金額: ¥80,000                                    │  │
│          │  │ カテゴリ: 住居費                                 │  │
│ 🏦 口座   │  │ 支払方法: みずほ銀行メイン口座                   │  │
│ カード   │  │ 支払日: 毎月27日                                 │  │
│          │  │ 次回支払予定: 2024/02/27                         │  │
│ 📁 カテゴリ│  │ メモ: 大家さんへ振込                             │  │
│          │  └──────────────────────────────────────────────────┘  │
│ 🔄 繰返支出│                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 📈 レポート│  │ Netflix                       [編集] [削除]      │  │
│          │  │                                                  │  │
│ ⚙ 設定    │  │ 金額: ¥1,980                                     │  │
│          │  │ カテゴリ: 娯楽費                                 │  │
│          │  │ 支払方法: 楽天カード                             │  │
│          │  │ 支払日: 毎月1日                                  │  │
│          │  │ 次回支払予定: 2024/02/01                         │  │
│          │  │ メモ: -                                          │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│          │  │ 電気代                        [編集] [削除]      │  │
│          │  │                                                  │  │
│          │  │ 金額: ¥8,000                                     │  │
│          │  │ カテゴリ: 光熱費 > 電気                          │  │
│          │  │ 支払方法: みずほ銀行メイン口座                   │  │
│          │  │ 支払日: 毎月26日                                 │  │
│          │  │ 次回支払予定: 2024/02/26                         │  │
│          │  │ メモ: 東京電力                                   │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
└──────────┴──────────────────────────────────────────────────────────┘
```

---

## 2. 繰り返し支出編集モーダル(PC版)

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│     ┌───────────────────────────────────────────────────┐           │
│     │ 繰り返し支出編集                          [× 閉じる]│           │
│     ├───────────────────────────────────────────────────┤           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 支出名                                      │  │           │
│     │ │ [家賃__________________]                    │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 金額                                        │  │           │
│     │ │ ¥ [80,000]                                  │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ カテゴリ                                    │  │           │
│     │ │ [住居費 ▼]                                  │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 支払方法                                    │  │           │
│     │ │ ○ 口座  [みずほ銀行メイン口座 ▼]          │  │           │
│     │ │ ● カード [楽天カード ▼]                    │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 支払日                                      │  │           │
│     │ │ 毎月 [27] 日                                │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ メモ                                        │  │           │
│     │ │ [大家さんへ振込______________]              │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │         [キャンセル]     [保存する]        │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     └───────────────────────────────────────────────────┘           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 3. スマホ版レイアウト

```
┌─────────────────────────┐
│ ← 繰り返し支出設定      │
├─────────────────────────┤
│                         │
│          [+ 支出を追加] │
│                         │
│ ┌─────────────────────┐ │
│ │ 家賃         [編集] │ │
│ │                     │ │
│ │ ¥80,000             │ │
│ │ 住居費              │ │
│ │ みずほ銀行          │ │
│ │ 毎月27日            │ │
│ │ 次回: 2024/02/27    │ │
│ │ 大家さんへ振込      │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │ Netflix      [編集] │ │
│ │                     │ │
│ │ ¥1,980              │ │
│ │ 娯楽費              │ │
│ │ 楽天カード          │ │
│ │ 毎月1日             │ │
│ │ 次回: 2024/02/01    │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │ 電気代       [編集] │ │
│ │                     │ │
│ │ ¥8,000              │ │
│ │ 光熱費 > 電気       │ │
│ │ みずほ銀行          │ │
│ │ 毎月26日            │ │
│ │ 次回: 2024/02/26    │ │
│ │ 東京電力            │ │
│ └─────────────────────┘ │
│                         │
└─────────────────────────┘
```

---

## 4. 繰り返し支出編集画面(スマホ版)

```
┌─────────────────────────┐
│ ← 繰り返し支出編集      │
├─────────────────────────┤
│                         │
│ 支出名                  │
│ ┌─────────────────────┐ │
│ │ 家賃                │ │
│ └─────────────────────┘ │
│                         │
│ 金額                    │
│ ┌─────────────────────┐ │
│ │ ¥ _____________     │ │
│ └─────────────────────┘ │
│                         │
│ カテゴリ                │
│ ┌─────────────────────┐ │
│ │ 住居費 ▼            │ │
│ └─────────────────────┘ │
│                         │
│ 支払方法                │
│ ○ 口座                  │
│ ┌─────────────────────┐ │
│ │ みずほ銀行 ▼        │ │
│ └─────────────────────┘ │
│                         │
│ ● カード                │
│ ┌─────────────────────┐ │
│ │ 楽天カード ▼        │ │
│ └─────────────────────┘ │
│                         │
│ 支払日                  │
│ ┌─────────────────────┐ │
│ │ 毎月 [__] 日        │ │
│ └─────────────────────┘ │
│                         │
│ メモ                    │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │   [キャンセル]      │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │   [保存する]        │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │   [削除する]        │ │
│ └─────────────────────┘ │
│                         │
└─────────────────────────┘
```

---

## 5. 未入力繰り返し支出ダイアログ(アプリ起動時)

```
┌─────────────────────────────────────────────┐
│ 繰り返し支出の登録                [× 閉じる]│
├─────────────────────────────────────────────┤
│                                             │
│ 未入力の繰り返し支出が3件あります          │
│                                             │
│ ┌─────────────────────────────────────────┐ │
│ │ ☑ 家賃                                  │ │
│ │    ¥80,000  2024/11/27, 2024/12/27     │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ ┌─────────────────────────────────────────┐ │
│ │ ☑ Netflix                               │ │
│ │    ¥1,980  2024/01/01                   │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ ┌─────────────────────────────────────────┐ │
│ │ ☑ 電気代                                │ │
│ │    ¥8,000  2024/12/26                   │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ [すべて選択]  [すべて解除]                  │
│                                             │
│ ┌─────────────────────────────────────────┐ │
│ │         [スキップ]     [登録する]      │ │
│ └─────────────────────────────────────────┘ │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 6. UI仕様

### 一覧表示
- 支出名、金額、カテゴリ、支払方法、支払日を表示
- 次回支払予定日を計算して表示
- カード形式で見やすく

### 次回支払予定日の計算
- 今日が支払日を過ぎていたら翌月
- 今日が支払日前なら今月

### 支払方法の表示
- 口座の場合: 口座名
- カードの場合: カード名

---

## 7. 機能詳細

### 一覧取得
- API: `GET /api/recurring-expenses`

### 未入力取得(起動時)
- API: `GET /api/recurring-expenses/pending`
- 支払日を過ぎた繰り返し支出を取得
- ダイアログで一覧表示

### 一括登録
- API: `POST /api/recurring-expenses/apply`
- チェックした繰り返し支出を取引として登録
- 複数月分溜まっている場合は全て登録

### 繰り返し支出作成
- API: `POST /api/recurring-expenses`

### 繰り返し支出更新
- API: `PUT /api/recurring-expenses/{recurringExpenseId}`

### 繰り返し支出削除
- API: `DELETE /api/recurring-expenses/{recurringExpenseId}`
- 確認ダイアログ表示

---

## 8. バリデーション

### 支出名
- 必須
- 100文字以内

### 金額
- 必須
- 0より大きい数値

### カテゴリ
- 必須
- 支出カテゴリのみ

### 支払方法
- 口座またはカードのいずれか必須

### 支払日
- 必須
- 1〜31

---

## 9. インタラクション

### PC版
- カードホバー: 軽くハイライト
- [編集]ボタン: モーダル表示
- [削除]ボタン: 確認ダイアログ

### スマホ版
- カードタップ: 詳細表示(展開)
- [編集]ボタン: 編集画面へ遷移

### 未入力ダイアログ
- チェックボックスで個別選択
- [すべて選択]/[すべて解除]ボタン
- [スキップ]: ダイアログを閉じる
- [登録する]: 選択した支出を一括登録

---

## 10. エッジケース

### 繰り返し支出がない場合
```
┌─────────────────────────┐
│                         │
│    🔄                   │
│                         │
│  まだ繰り返し支出が     │
│  設定されていません     │
│                         │
│  [支出を追加]           │
│                         │
└─────────────────────────┘
```

### 未入力がない場合
- ダイアログを表示せずダッシュボードへ

---

このワイヤーフレームで問題ないですか?

次は**統計・レポート画面**を作成しますね!