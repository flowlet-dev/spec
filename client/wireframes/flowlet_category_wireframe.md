# FLOWLET カテゴリ管理画面 ワイヤーフレーム

## 1. PC版レイアウト

```
┌─────────────────────────────────────────────────────────────────────┐
│ FLOWLET                                    [ユーザー名] [設定] [⚙]  │
├──────────┬──────────────────────────────────────────────────────────┤
│          │                                                          │
│ ナビゲー  │  ┌─────────────────────────────────────────────────┐   │
│ ション   │  │ カテゴリ管理                                     │   │
│          │  └─────────────────────────────────────────────────┘   │
│ 🏠 ホーム │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 💰 取引   │  │ [支出カテゴリ]  収入カテゴリ                      │  │
│  - 入力  │  └──────────────────────────────────────────────────┘  │
│  - 履歴  │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 📊 予算   │  │ カテゴリ一覧                  [+ カテゴリを追加]  │  │
│          │  └──────────────────────────────────────────────────┘  │
│ 🎯 貯金   │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 🏦 口座   │  │ 📁 食費                       [編集] [削除]      │  │
│ カード   │  │    ├─ 食料品                 [編集] [削除]      │  │
│          │  │    ├─ 外食                   [編集] [削除]      │  │
│ 📁 カテゴリ│  │    └─ カフェ                 [編集] [削除]      │  │
│          │  └──────────────────────────────────────────────────┘  │
│ 🔄 繰返支出│                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│ 📈 レポート│  │ 📁 交通費                     [編集] [削除]      │  │
│          │  │    ├─ 電車                   [編集] [削除]      │  │
│ ⚙ 設定    │  │    ├─ バス                   [編集] [削除]      │  │
│          │  │    └─ ガソリン               [編集] [削除]      │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│          │  │ 📁 娯楽費                     [編集] [削除]      │  │
│          │  │    ├─ 趣味                   [編集] [削除]      │  │
│          │  │    ├─ 旅行                   [編集] [削除]      │  │
│          │  │    └─ 映画                   [編集] [削除]      │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│          │  │ 📁 住居費                     [編集] [削除]      │  │
│          │  │    (小カテゴリなし)                              │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
│          │  ┌──────────────────────────────────────────────────┐  │
│          │  │ 🗑 光熱費 (削除済み)          [復元]            │  │
│          │  │    ├─ 電気                                      │  │
│          │  │    ├─ ガス                                      │  │
│          │  │    └─ 水道                                      │  │
│          │  └──────────────────────────────────────────────────┘  │
│          │                                                          │
└──────────┴──────────────────────────────────────────────────────────┘
```

---

## 2. カテゴリ編集モーダル(PC版 - 大カテゴリ)

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│     ┌───────────────────────────────────────────────────┐           │
│     │ カテゴリ編集                              [× 閉じる]│           │
│     ├───────────────────────────────────────────────────┤           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ カテゴリ名                                  │  │           │
│     │ │ [食費__________________]                    │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ カテゴリ種別                                │  │           │
│     │ │ ● 支出  ○ 収入                            │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 親カテゴリ                                  │  │           │
│     │ │ [なし (大カテゴリ) ▼]                      │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │         [キャンセル]     [保存する]        │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     └───────────────────────────────────────────────────┘           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 3. カテゴリ編集モーダル(PC版 - 小カテゴリ)

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│     ┌───────────────────────────────────────────────────┐           │
│     │ カテゴリ編集                              [× 閉じる]│           │
│     ├───────────────────────────────────────────────────┤           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ カテゴリ名                                  │  │           │
│     │ │ [食料品__________________]                  │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ カテゴリ種別 (変更不可)                     │  │           │
│     │ │ 支出                                        │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │ 親カテゴリ                                  │  │           │
│     │ │ [食費 ▼]                                    │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     │ ┌─────────────────────────────────────────────┐  │           │
│     │ │         [キャンセル]     [保存する]        │  │           │
│     │ └─────────────────────────────────────────────┘  │           │
│     │                                                   │           │
│     └───────────────────────────────────────────────────┘           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 4. スマホ版レイアウト(支出カテゴリ)

```
┌─────────────────────────┐
│ ← カテゴリ管理          │
├─────────────────────────┤
│                         │
│ [支出] 収入             │
│                         │
│          [+ カテゴリ追加]│
│                         │
│ ┌─────────────────────┐ │
│ │ 📁 食費      [編集] │ │
│ │   ├ 食料品   [編集] │ │
│ │   ├ 外食     [編集] │ │
│ │   └ カフェ   [編集] │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │ 📁 交通費    [編集] │ │
│ │   ├ 電車     [編集] │ │
│ │   ├ バス     [編集] │ │
│ │   └ ガソリン [編集] │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │ 📁 娯楽費    [編集] │ │
│ │   ├ 趣味     [編集] │ │
│ │   ├ 旅行     [編集] │ │
│ │   └ 映画     [編集] │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │ 📁 住居費    [編集] │ │
│ │   (小カテゴリなし)  │ │
│ └─────────────────────┘ │
│                         │
│ 削除済みカテゴリ        │
│ ┌─────────────────────┐ │
│ │ 🗑 光熱費    [復元] │ │
│ │   ├ 電気            │ │
│ │   ├ ガス            │ │
│ │   └ 水道            │ │
│ └─────────────────────┘ │
│                         │
└─────────────────────────┘
```

---

## 5. カテゴリ編集画面(スマホ版)

```
┌─────────────────────────┐
│ ← カテゴリ編集          │
├─────────────────────────┤
│                         │
│ カテゴリ名              │
│ ┌─────────────────────┐ │
│ │ 食費                │ │
│ └─────────────────────┘ │
│                         │
│ カテゴリ種別            │
│ ● 支出  ○ 収入         │
│                         │
│ 親カテゴリ              │
│ ┌─────────────────────┐ │
│ │ なし (大カテゴリ) ▼│ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │   [キャンセル]      │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │   [保存する]        │ │
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │   [削除する]        │ │
│ └─────────────────────┘ │
│                         │
└─────────────────────────┘
```

---

## 6. UI仕様

### タブ切り替え
- 支出カテゴリ / 収入カテゴリ
- タブごとに一覧を表示

### 階層表示
- 大カテゴリをフォルダアイコン(📁)で表示
- 小カテゴリはインデントして表示
- 展開/折りたたみ可能(PC版)

### 削除済みカテゴリ
- 灰色で表示
- ゴミ箱アイコン(🗑)
- [復元]ボタンで復元可能
- 実際には論理削除(`isDeleted = true`)

### カテゴリの順序
- ドラッグ&ドロップで並び替え(オプション)
- または固定順序

---

## 7. 機能詳細

### カテゴリ一覧取得
- API: `GET /api/categories?type=EXPENSE`
- 階層構造で取得

### カテゴリ作成
- API: `POST /api/categories`
- 大カテゴリ: `parentCategoryId = null`
- 小カテゴリ: `parentCategoryId` を指定

### カテゴリ更新
- API: `PUT /api/categories/{categoryId}`
- カテゴリ名、親カテゴリを変更可能
- カテゴリ種別は変更不可

### カテゴリ削除(論理削除)
- API: `DELETE /api/categories/{categoryId}`
- 実際には削除せず`isDeleted = true`
- 既存の取引は「削除済みカテゴリ」として表示

### カテゴリ復元
- `isDeleted = false` に更新
- API: `PUT /api/categories/{categoryId}`

---

## 8. バリデーション

### カテゴリ名
- 必須
- 100文字以内
- 同じ親カテゴリ内で重複不可

### カテゴリ種別
- 必須
- 作成後は変更不可

### 親カテゴリ
- 小カテゴリの場合は必須
- 同じ種別の大カテゴリのみ選択可能
- 自分自身や子孫を親にすることは不可

---

## 9. インタラクション

### PC版
- 大カテゴリクリック: 展開/折りたたみ
- [編集]ボタン: モーダル表示
- [削除]ボタン: 確認ダイアログ
- ドラッグ&ドロップ: 順序変更(オプション)

### スマホ版
- カテゴリタップ: 展開/折りたたみ
- [編集]ボタン: 編集画面へ遷移
- スワイプアクション: 削除(オプション)

---

## 10. エッジケース

### カテゴリがない場合
```
┌─────────────────────────┐
│                         │
│    📁                   │
│                         │
│  まだカテゴリが作成     │
│  されていません         │
│                         │
│  [カテゴリを追加]       │
│                         │
└─────────────────────────┘
```

### 削除確認ダイアログ
```
┌─────────────────────────┐
│ カテゴリを削除          │
├─────────────────────────┤
│                         │
│ 「食費」を削除しますか? │
│                         │
│ ※削除後も既存の取引は   │
│   保持されます          │
│                         │
│ [キャンセル]  [削除]    │
└─────────────────────────┘
```

---

このワイヤーフレームで問題ないですか?

次は**繰り返し支出設定画面**を作成しますね!